{% load static %}
<div class="navbar-markets-wrap" id="navbar-markets-wrap">
    <button type="button" class="navbar-markets-trigger" id="navbar-markets-trigger" aria-haspopup="true" aria-expanded="false" aria-label="Open Markets">
        <span class="navbar-markets-trigger-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
        </span>
        <span class="navbar-markets-trigger-label">Markets</span>
    </button>
    <div class="navbar-markets-dropdown" id="navbar-markets-dropdown" role="dialog" aria-label="Markets" hidden>
        <div class="markets-widget">
            <div class="markets-widget-header">
                <span class="markets-widget-title">
                    <svg class="markets-title-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/></svg>
                    Markets
                </span>
                <button type="button" class="markets-widget-menu" aria-label="More options">⋮</button>
            </div>
            <ul class="markets-list">
                <li class="markets-item">
                    <div class="markets-item-left">
                        <span class="markets-item-title">NIFTY</span>
                        <span class="markets-item-subtitle">NIFTY</span>
                    </div>
                    <div class="markets-item-right">
                        <span class="markets-sparkline" aria-hidden="true">
                            <svg viewBox="0 0 60 24" preserveAspectRatio="none"><polyline fill="none" stroke="currentColor" stroke-width="1.5" points="0,18 10,14 20,16 30,10 40,12 50,8 60,6"/></svg>
                        </span>
                        <span class="markets-change positive">+0.06%</span>
                        <span class="markets-value">25,496.55</span>
                    </div>
                </li>
                <li class="markets-item">
                    <div class="markets-item-left">
                        <span class="markets-item-title">SENSEX</span>
                        <span class="markets-item-subtitle">SENSEX</span>
                    </div>
                    <div class="markets-item-right">
                        <span class="markets-sparkline negative" aria-hidden="true">
                            <svg viewBox="0 0 60 24" preserveAspectRatio="none"><polyline fill="none" stroke="currentColor" stroke-width="1.5" points="0,6 10,10 20,8 30,14 40,12 50,16 60,18"/></svg>
                        </span>
                        <span class="markets-change negative">-0.03%</span>
                        <span class="markets-value">82,248.61</span>
                    </div>
                </li>
                <li class="markets-item">
                    <div class="markets-item-left">
                        <span class="markets-item-title">Gold</span>
                        <span class="markets-item-subtitle">Gold</span>
                    </div>
                    <div class="markets-item-right">
                        <span class="markets-sparkline positive" aria-hidden="true">
                            <svg viewBox="0 0 60 24" preserveAspectRatio="none"><polyline fill="none" stroke="currentColor" stroke-width="1.5" points="0,14 15,14 30,10 45,12 60,8"/></svg>
                        </span>
                        <span class="markets-change positive">+0.28%</span>
                        <span class="markets-value">5,208.60</span>
                    </div>
                </li>
                <li class="markets-item">
                    <div class="markets-item-left">
                        <span class="markets-item-title">Silver</span>
                        <span class="markets-item-subtitle rising">Rising fast</span>
                    </div>
                    <div class="markets-item-right">
                        <span class="markets-sparkline positive" aria-hidden="true">
                            <svg viewBox="0 0 60 24" preserveAspectRatio="none"><polyline fill="none" stroke="currentColor" stroke-width="1.5" points="0,20 12,16 24,12 36,8 48,4 60,2"/></svg>
                        </span>
                        <span class="markets-change positive">+2.01%</span>
                        <span class="markets-value">89.35</span>
                    </div>
                </li>
                <li class="markets-item">
                    <div class="markets-item-left">
                        <span class="markets-item-title">USD/INR</span>
                        <span class="markets-item-subtitle">US Dollar/Indian Rupee</span>
                    </div>
                    <div class="markets-item-right">
                        <span class="markets-sparkline positive" aria-hidden="true">
                            <svg viewBox="0 0 60 24" preserveAspectRatio="none"><polyline fill="none" stroke="currentColor" stroke-width="1.5" points="0,16 15,14 30,12 45,10 60,8"/></svg>
                        </span>
                        <span class="markets-change positive">+0.02%</span>
                        <span class="markets-value">90.993</span>
                    </div>
                </li>
            </ul>
            <div class="markets-widget-footer">
                <span class="markets-pagination-dots">● ● ● ○ ○</span>
                <a href="{% url 'prediction' %}" class="markets-see-link">See market</a>
            </div>
        </div>
    </div>
</div>
<script>
(function() {
    var wrap = document.getElementById('navbar-markets-wrap');
    if (!wrap) return;
    var trigger = document.getElementById('navbar-markets-trigger');
    var dropdown = document.getElementById('navbar-markets-dropdown');
    if (!trigger || !dropdown) return;
    function open() {
        dropdown.removeAttribute('hidden');
        trigger.setAttribute('aria-expanded', 'true');
    }
    function close() {
        dropdown.setAttribute('hidden', '');
        trigger.setAttribute('aria-expanded', 'false');
    }
    function toggle() {
        if (dropdown.hasAttribute('hidden')) open(); else close();
    }
    trigger.addEventListener('click', function(e) {
        e.stopPropagation();
        toggle();
    });
    document.addEventListener('click', function() {
        if (!dropdown.hasAttribute('hidden')) close();
    });
    dropdown.addEventListener('click', function(e) {
        e.stopPropagation();
    });
})();
</script>
